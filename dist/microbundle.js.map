{"version":3,"file":"microbundle.js","sources":["../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/utils.js","../src/lib/babel-custom.js","../src/log-error.js","../src/index.js"],"sourcesContent":["// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && !check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, value);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\t_entry(_this).then(returnValue, function(error) {\n\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import fs from 'fs';\nimport { promisify } from 'es6-promisify';\n\nexport const readFile = promisify(fs.readFile);\n// export const writeFile = promisify(fs.writeFile);\nexport const stat = promisify(fs.stat);\nexport const isDir = name =>\n\tstat(name)\n\t\t.then(stats => stats.isDirectory())\n\t\t.catch(() => false);\nexport const isFile = name =>\n\tstat(name)\n\t\t.then(stats => stats.isFile())\n\t\t.catch(() => false);\nexport const stdout = console.log.bind(console); // eslint-disable-line no-console\nexport const stderr = console.error.bind(console);\n\nexport const isTruthy = obj => {\n\tif (!obj) {\n\t\treturn false;\n\t}\n\n\treturn obj.constructor !== Object || Object.keys(obj).length > 0;\n};\n","import { createConfigItem } from '@babel/core';\nimport babelPlugin from 'rollup-plugin-babel';\nimport merge from 'lodash.merge';\nimport { isTruthy } from '../utils';\n\nconst ESMODULES_TARGET = {\n\tesmodules: true,\n};\n\nconst mergeConfigItems = (type, ...configItemsToMerge) => {\n\tconst mergedItems = [];\n\n\tconfigItemsToMerge.forEach(configItemToMerge => {\n\t\tconfigItemToMerge.forEach(item => {\n\t\t\tconst itemToMergeWithIndex = mergedItems.findIndex(\n\t\t\t\tmergedItem => mergedItem.file.resolved === item.file.resolved,\n\t\t\t);\n\n\t\t\tif (itemToMergeWithIndex === -1) {\n\t\t\t\tmergedItems.push(item);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tmergedItems[itemToMergeWithIndex] = createConfigItem(\n\t\t\t\t[\n\t\t\t\t\tmergedItems[itemToMergeWithIndex].file.resolved,\n\t\t\t\t\tmerge(mergedItems[itemToMergeWithIndex].options, item.options),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\ttype,\n\t\t\t\t},\n\t\t\t);\n\t\t});\n\t});\n\n\treturn mergedItems;\n};\n\nconst createConfigItems = (type, items) =>\n\titems.map(({ name, ...options }) =>\n\t\tcreateConfigItem([require.resolve(name), options], { type }),\n\t);\n\nexport default babelPlugin.custom(babelCore => ({\n\t// Passed the plugin options.\n\toptions({ custom: customOptions, ...pluginOptions }) {\n\t\treturn {\n\t\t\t// Pull out any custom options that the plugin might have.\n\t\t\tcustomOptions,\n\n\t\t\t// Pass the options back with the two custom options removed.\n\t\t\tpluginOptions,\n\t\t};\n\t},\n\n\tconfig(config, { customOptions }) {\n\t\tconst defaultPlugins = createConfigItems(\n\t\t\t'plugin',\n\t\t\t[\n\t\t\t\t{\n\t\t\t\t\tname: '@babel/plugin-transform-react-jsx',\n\t\t\t\t\tpragma: customOptions.jsx || 'React.createElement',\n\t\t\t\t\tpragmaFrag: customOptions.jsxFragment || 'Fragment',\n\t\t\t\t},\n\t\t\t\t!customOptions.typescript && {\n\t\t\t\t\tname: '@babel/plugin-transform-flow-strip-types',\n\t\t\t\t},\n\t\t\t\tisTruthy(customOptions.defines) && {\n\t\t\t\t\tname: 'babel-plugin-transform-replace-expressions',\n\t\t\t\t\treplace: customOptions.defines,\n\t\t\t\t},\n\t\t\t\t!customOptions.modern && {\n\t\t\t\t\tname: 'babel-plugin-transform-async-to-promises',\n\t\t\t\t\tinlineHelpers: true,\n\t\t\t\t\texternalHelpers: true,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: '@babel/plugin-proposal-class-properties',\n\t\t\t\t\tloose: true,\n\t\t\t\t},\n\t\t\t\t!customOptions.modern && {\n\t\t\t\t\tname: '@babel/plugin-transform-regenerator',\n\t\t\t\t\tasync: false,\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tname: 'babel-plugin-macros',\n\t\t\t\t},\n\t\t\t].filter(Boolean),\n\t\t);\n\n\t\tconst babelOptions = config.options || {};\n\n\t\tconst envIdx = (babelOptions.presets || []).findIndex(preset =>\n\t\t\tpreset.file.request.includes('@babel/preset-env'),\n\t\t);\n\n\t\tif (envIdx !== -1) {\n\t\t\tconst preset = babelOptions.presets[envIdx];\n\t\t\tbabelOptions.presets[envIdx] = createConfigItem(\n\t\t\t\t[\n\t\t\t\t\tpreset.file.resolved,\n\t\t\t\t\tObject.assign(\n\t\t\t\t\t\tmerge(\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tloose: true,\n\t\t\t\t\t\t\t\tuseBuiltIns: false,\n\t\t\t\t\t\t\t\ttargets: customOptions.targets,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tpreset.options,\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tmodules: false,\n\t\t\t\t\t\t\t\texclude: merge(\n\t\t\t\t\t\t\t\t\t['transform-async-to-generator', 'transform-regenerator'],\n\t\t\t\t\t\t\t\t\tpreset.options.exclude || [],\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t),\n\t\t\t\t\t\tcustomOptions.modern ? { targets: ESMODULES_TARGET } : {},\n\t\t\t\t\t),\n\t\t\t\t],\n\t\t\t\t{\n\t\t\t\t\ttype: `preset`,\n\t\t\t\t},\n\t\t\t);\n\t\t} else {\n\t\t\tbabelOptions.presets = createConfigItems('preset', [\n\t\t\t\t{\n\t\t\t\t\tname: '@babel/preset-env',\n\t\t\t\t\ttargets: customOptions.modern\n\t\t\t\t\t\t? ESMODULES_TARGET\n\t\t\t\t\t\t: customOptions.targets,\n\t\t\t\t\tmodules: false,\n\t\t\t\t\tloose: true,\n\t\t\t\t\tuseBuiltIns: false,\n\t\t\t\t\texclude: ['transform-async-to-generator', 'transform-regenerator'],\n\t\t\t\t},\n\t\t\t]);\n\t\t}\n\n\t\t// Merge babelrc & our plugins together\n\t\tbabelOptions.plugins = mergeConfigItems(\n\t\t\t'plugin',\n\t\t\tdefaultPlugins,\n\t\t\tbabelOptions.plugins || [],\n\t\t);\n\n\t\tbabelOptions.generatorOpts = {\n\t\t\tminified: customOptions.compress,\n\t\t\tcompact: customOptions.compress,\n\t\t\tshouldPrintComment: comment => /[@#]__PURE__/.test(comment),\n\t\t};\n\n\t\treturn babelOptions;\n\t},\n}));\n","import { red, dim } from 'kleur';\nimport { stderr } from './utils';\n\nexport default function(err) {\n\tconst error = err.error || err;\n\tconst description = `${error.name ? error.name + ': ' : ''}${error.message ||\n\t\terror}`;\n\tconst message = error.plugin\n\t\t? `(${error.plugin} plugin) ${description}`\n\t\t: description;\n\n\tstderr(red().bold(message));\n\n\tif (error.loc) {\n\t\tstderr();\n\t\tstderr(`at ${error.loc.file}:${error.loc.line}:${error.loc.column}`);\n\t}\n\n\tif (error.frame) {\n\t\tstderr();\n\t\tstderr(dim(error.frame));\n\t} else if (err.stack) {\n\t\tconst headlessStack = error.stack.replace(message, '');\n\t\tstderr(dim(headlessStack));\n\t}\n\n\tstderr();\n}\n","import fs from 'fs';\nimport { resolve, relative, dirname, basename, extname } from 'path';\nimport { green, red, yellow, white, blue } from 'kleur';\nimport { map, series } from 'asyncro';\nimport glob from 'tiny-glob/sync';\nimport autoprefixer from 'autoprefixer';\nimport cssnano from 'cssnano';\nimport { rollup, watch } from 'rollup';\nimport commonjs from 'rollup-plugin-commonjs';\nimport babel from 'rollup-plugin-babel';\nimport customBabel from './lib/babel-custom';\nimport nodeResolve from 'rollup-plugin-node-resolve';\nimport { terser } from 'rollup-plugin-terser';\nimport alias from 'rollup-plugin-alias';\nimport postcss from 'rollup-plugin-postcss';\nimport gzipSize from 'gzip-size';\nimport brotliSize from 'brotli-size';\nimport prettyBytes from 'pretty-bytes';\nimport typescript from 'rollup-plugin-typescript2';\nimport json from 'rollup-plugin-json';\nimport logError from './log-error';\nimport { readFile, isDir, isFile, stdout, stderr, isTruthy } from './utils';\nimport camelCase from 'camelcase';\n\nconst removeScope = name => name.replace(/^@.*\\//, '');\n\n// Convert booleans and int define= values to literals.\n// This is more intuitive than `microbundle --define A=1` producing A=\"1\".\nconst toReplacementExpression = (value, name) => {\n\t// --define A=\"1\",B='true' produces string:\n\tconst matches = value.match(/^(['\"])(.+)\\1$/);\n\tif (matches) {\n\t\treturn [JSON.stringify(matches[2]), name];\n\t}\n\n\t// --define A=1,B=true produces int/boolean literal:\n\tif (/^(true|false|\\d+)$/i.test(value)) {\n\t\treturn [value, name];\n\t}\n\n\t// default: string literal\n\treturn [JSON.stringify(value), name];\n};\n\n// Normalize Terser options from microbundle's relaxed JSON format (mutates argument in-place)\nfunction normalizeMinifyOptions(minifyOptions) {\n\tconst mangle = minifyOptions.mangle || (minifyOptions.mangle = {});\n\tlet properties = mangle.properties;\n\n\t// allow top-level \"properties\" key to override mangle.properties (including {properties:false}):\n\tif (minifyOptions.properties != null) {\n\t\tproperties = mangle.properties =\n\t\t\tminifyOptions.properties &&\n\t\t\tObject.assign(properties, minifyOptions.properties);\n\t}\n\n\t// allow previous format ({ mangle:{regex:'^_',reserved:[]} }):\n\tif (minifyOptions.regex || minifyOptions.reserved) {\n\t\tif (!properties) properties = mangle.properties = {};\n\t\tproperties.regex = properties.regex || minifyOptions.regex;\n\t\tproperties.reserved = properties.reserved || minifyOptions.reserved;\n\t}\n\n\tif (properties) {\n\t\tif (properties.regex) properties.regex = new RegExp(properties.regex);\n\t\tproperties.reserved = [].concat(properties.reserved || []);\n\t}\n}\n\n// Parses values of the form \"$=jQuery,React=react\" into key-value object pairs.\nconst parseMappingArgument = (globalStrings, processValue) => {\n\tconst globals = {};\n\tglobalStrings.split(',').forEach(globalString => {\n\t\tlet [key, value] = globalString.split('=');\n\t\tif (processValue) {\n\t\t\tconst r = processValue(value, key);\n\t\t\tif (r !== undefined) {\n\t\t\t\tif (Array.isArray(r)) {\n\t\t\t\t\t[value, key] = r;\n\t\t\t\t} else {\n\t\t\t\t\tvalue = r;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tglobals[key] = value;\n\t});\n\treturn globals;\n};\n\n// Extensions to use when resolving modules\nconst EXTENSIONS = ['.ts', '.tsx', '.js', '.jsx', '.es6', '.es', '.mjs'];\n\nconst WATCH_OPTS = {\n\texclude: 'node_modules/**',\n};\n\n// Hoist function because something (rollup?) incorrectly removes it\nfunction formatSize(size, filename, type, raw) {\n\tconst pretty = raw ? `${size} B` : prettyBytes(size);\n\tconst color = size < 5000 ? green : size > 40000 ? red : yellow;\n\tconst MAGIC_INDENTATION = type === 'br' ? 13 : 10;\n\treturn `${' '.repeat(MAGIC_INDENTATION - pretty.length)}${color(\n\t\tpretty,\n\t)}: ${white(basename(filename))}.${type}`;\n}\n\nasync function getSizeInfo(code, filename, raw) {\n\tconst gzip = formatSize(\n\t\tawait gzipSize(code),\n\t\tfilename,\n\t\t'gz',\n\t\traw || code.length < 5000,\n\t);\n\tconst brotli = formatSize(\n\t\tawait brotliSize(code),\n\t\tfilename,\n\t\t'br',\n\t\traw || code.length < 5000,\n\t);\n\treturn gzip + '\\n' + brotli;\n}\n\nexport default async function microbundle(inputOptions) {\n\tlet options = { ...inputOptions };\n\n\toptions.cwd = resolve(process.cwd(), inputOptions.cwd);\n\tconst cwd = options.cwd;\n\n\tconst { hasPackageJson, pkg } = await getConfigFromPkgJson(cwd);\n\toptions.pkg = pkg;\n\n\tconst { finalName, pkgName } = getName({\n\t\tname: options.name,\n\t\tpkgName: options.pkg.name,\n\t\tamdName: options.pkg.amdName,\n\t\thasPackageJson,\n\t\tcwd,\n\t});\n\n\toptions.name = finalName;\n\toptions.pkg.name = pkgName;\n\n\tif (options.sourcemap !== false) {\n\t\toptions.sourcemap = true;\n\t}\n\n\toptions.input = await getInput({\n\t\tentries: options.entries,\n\t\tcwd,\n\t\tsource: options.pkg.source,\n\t\tmodule: options.pkg.module,\n\t});\n\n\toptions.output = await getOutput({\n\t\tcwd,\n\t\toutput: options.output,\n\t\tpkgMain: options.pkg.main,\n\t\tpkgName: options.pkg.name,\n\t});\n\n\toptions.entries = await getEntries({\n\t\tcwd,\n\t\tinput: options.input,\n\t});\n\n\toptions.multipleEntries = options.entries.length > 1;\n\n\t// to disable compress you can put in false or 0 but it's a string so our boolean checks won't work\n\toptions.compress =\n\t\ttypeof options.compress !== 'boolean'\n\t\t\t? options.compress !== 'false' && options.compress !== '0'\n\t\t\t: options.compress;\n\n\tlet formats = (options.format || options.formats).split(',');\n\t// always compile cjs first if it's there:\n\tformats.sort((a, b) => (a === 'cjs' ? -1 : a > b ? 1 : 0));\n\n\tlet steps = [];\n\tfor (let i = 0; i < options.entries.length; i++) {\n\t\tfor (let j = 0; j < formats.length; j++) {\n\t\t\tsteps.push(\n\t\t\t\tcreateConfig(\n\t\t\t\t\toptions,\n\t\t\t\t\toptions.entries[i],\n\t\t\t\t\tformats[j],\n\t\t\t\t\ti === 0 && j === 0,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\tif (options.watch) {\n\t\tconst onBuild = options.onBuild;\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tstdout(\n\t\t\t\tblue(\n\t\t\t\t\t`Watching source, compiling to ${relative(\n\t\t\t\t\t\tcwd,\n\t\t\t\t\t\tdirname(options.output),\n\t\t\t\t\t)}:`,\n\t\t\t\t),\n\t\t\t);\n\t\t\tsteps.map(options => {\n\t\t\t\twatch(\n\t\t\t\t\tObject.assign(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\toutput: options.outputOptions,\n\t\t\t\t\t\t\twatch: WATCH_OPTS,\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions.inputOptions,\n\t\t\t\t\t),\n\t\t\t\t).on('event', e => {\n\t\t\t\t\tif (e.code === 'FATAL') {\n\t\t\t\t\t\treturn reject(e.error);\n\t\t\t\t\t} else if (e.code === 'ERROR') {\n\t\t\t\t\t\tlogError(e.error);\n\t\t\t\t\t}\n\t\t\t\t\tif (e.code === 'END') {\n\t\t\t\t\t\toptions._sizeInfo.then(text => {\n\t\t\t\t\t\t\tstdout(`Wrote ${text.trim()}`);\n\t\t\t\t\t\t});\n\t\t\t\t\t\tif (typeof onBuild === 'function') {\n\t\t\t\t\t\t\tonBuild(e);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\tlet cache;\n\tlet out = await series(\n\t\tsteps.map(config => async () => {\n\t\t\tconst { inputOptions, outputOptions } = config;\n\t\t\tinputOptions.cache = cache;\n\t\t\tlet bundle = await rollup(inputOptions);\n\t\t\tcache = bundle;\n\t\t\tawait bundle.write(outputOptions);\n\t\t\treturn await config._sizeInfo;\n\t\t}),\n\t);\n\n\treturn (\n\t\tblue(\n\t\t\t`Build \"${options.name}\" to ${relative(cwd, dirname(options.output)) ||\n\t\t\t\t'.'}:`,\n\t\t) +\n\t\t'\\n   ' +\n\t\tout.join('\\n   ')\n\t);\n}\n\nasync function getConfigFromPkgJson(cwd) {\n\ttry {\n\t\tconst pkgJSON = await readFile(resolve(cwd, 'package.json'), 'utf8');\n\t\tconst pkg = JSON.parse(pkgJSON);\n\n\t\treturn {\n\t\t\thasPackageJson: true,\n\t\t\tpkg,\n\t\t};\n\t} catch (err) {\n\t\tconst pkgName = basename(cwd);\n\n\t\tstderr(\n\t\t\t// `Warn ${yellow(`no package.json found. Assuming a pkg.name of \"${pkgName}\".`)}`\n\t\t\tyellow(\n\t\t\t\t`${yellow().inverse(\n\t\t\t\t\t'WARN',\n\t\t\t\t)} no package.json found. Assuming a pkg.name of \"${pkgName}\".`,\n\t\t\t),\n\t\t);\n\n\t\tlet msg = String(err.message || err);\n\t\tif (!msg.match(/ENOENT/)) stderr(`  ${red().dim(msg)}`);\n\n\t\treturn { hasPackageJson: false, pkg: { name: pkgName } };\n\t}\n}\n\nconst safeVariableName = name =>\n\tcamelCase(\n\t\tremoveScope(name)\n\t\t\t.toLowerCase()\n\t\t\t.replace(/((^[^a-zA-Z]+)|[^\\w.-])|([^a-zA-Z0-9]+$)/g, ''),\n\t);\n\nfunction getName({ name, pkgName, amdName, cwd, hasPackageJson }) {\n\tif (!pkgName) {\n\t\tpkgName = basename(cwd);\n\t\tif (hasPackageJson) {\n\t\t\tstderr(\n\t\t\t\tyellow(\n\t\t\t\t\t`${yellow().inverse(\n\t\t\t\t\t\t'WARN',\n\t\t\t\t\t)} missing package.json \"name\" field. Assuming \"${pkgName}\".`,\n\t\t\t\t),\n\t\t\t);\n\t\t}\n\t}\n\n\treturn { finalName: name || amdName || safeVariableName(pkgName), pkgName };\n}\n\nasync function jsOrTs(cwd, filename) {\n\tconst extension = (await isFile(resolve(cwd, filename + '.ts')))\n\t\t? '.ts'\n\t\t: (await isFile(resolve(cwd, filename + '.tsx')))\n\t\t? '.tsx'\n\t\t: '.js';\n\n\treturn resolve(cwd, `${filename}${extension}`);\n}\n\nasync function getInput({ entries, cwd, source, module }) {\n\tconst input = [];\n\n\t[]\n\t\t.concat(\n\t\t\tentries && entries.length\n\t\t\t\t? entries\n\t\t\t\t: (source &&\n\t\t\t\t\t\t(Array.isArray(source) ? source : [source]).map(file =>\n\t\t\t\t\t\t\tresolve(cwd, file),\n\t\t\t\t\t\t)) ||\n\t\t\t\t\t\t((await isDir(resolve(cwd, 'src'))) &&\n\t\t\t\t\t\t\t(await jsOrTs(cwd, 'src/index'))) ||\n\t\t\t\t\t\t(await jsOrTs(cwd, 'index')) ||\n\t\t\t\t\t\tmodule,\n\t\t)\n\t\t.map(file => glob(file))\n\t\t.forEach(file => input.push(...file));\n\n\treturn input;\n}\n\nasync function getOutput({ cwd, output, pkgMain, pkgName }) {\n\tlet main = resolve(cwd, output || pkgMain || 'dist');\n\tif (!main.match(/\\.[a-z]+$/) || (await isDir(main))) {\n\t\tmain = resolve(main, `${removeScope(pkgName)}.js`);\n\t}\n\treturn main;\n}\n\nasync function getEntries({ input, cwd }) {\n\tlet entries = (await map([].concat(input), async file => {\n\t\tfile = resolve(cwd, file);\n\t\tif (await isDir(file)) {\n\t\t\tfile = resolve(file, 'index.js');\n\t\t}\n\t\treturn file;\n\t})).filter((item, i, arr) => arr.indexOf(item) === i);\n\treturn entries;\n}\n\n// shebang cache map because the transform only gets run once\nconst shebang = {};\n\nfunction createConfig(options, entry, format, writeMeta) {\n\tlet { pkg } = options;\n\n\tlet external = ['dns', 'fs', 'path', 'url'].concat(\n\t\toptions.entries.filter(e => e !== entry),\n\t);\n\n\tlet outputAliases = {};\n\t// since we transform src/index.js, we need to rename imports for it:\n\tif (options.multipleEntries) {\n\t\toutputAliases['.'] = './' + basename(options.output);\n\t}\n\n\tconst moduleAliases = options.alias\n\t\t? parseMappingArgument(options.alias)\n\t\t: {};\n\n\tconst peerDeps = Object.keys(pkg.peerDependencies || {});\n\tif (options.external === 'none') {\n\t\t// bundle everything (external=[])\n\t} else if (options.external) {\n\t\texternal = external.concat(peerDeps).concat(options.external.split(','));\n\t} else {\n\t\texternal = external\n\t\t\t.concat(peerDeps)\n\t\t\t.concat(Object.keys(pkg.dependencies || {}));\n\t}\n\n\tlet globals = external.reduce((globals, name) => {\n\t\t// valid JS identifiers are usually library globals:\n\t\tif (name.match(/^[a-z_$][a-z0-9_$]*$/)) {\n\t\t\tglobals[name] = name;\n\t\t}\n\t\treturn globals;\n\t}, {});\n\tif (options.globals && options.globals !== 'none') {\n\t\tglobals = Object.assign(globals, parseMappingArgument(options.globals));\n\t}\n\n\tlet defines = {};\n\tif (options.define) {\n\t\tdefines = Object.assign(\n\t\t\tdefines,\n\t\t\tparseMappingArgument(options.define, toReplacementExpression),\n\t\t);\n\t}\n\n\tfunction replaceName(filename, name) {\n\t\treturn resolve(\n\t\t\tdirname(filename),\n\t\t\tname + basename(filename).replace(/^[^.]+/, ''),\n\t\t);\n\t}\n\n\tlet mainNoExtension = options.output;\n\tif (options.multipleEntries) {\n\t\tlet name = entry.match(/([\\\\/])index(\\.(umd|cjs|es|m))?\\.m?js$/)\n\t\t\t? mainNoExtension\n\t\t\t: entry;\n\t\tmainNoExtension = resolve(dirname(mainNoExtension), basename(name));\n\t}\n\tmainNoExtension = mainNoExtension.replace(/(\\.(umd|cjs|es|m))?\\.m?js$/, '');\n\n\tlet moduleMain = replaceName(\n\t\tpkg.module && !pkg.module.match(/src\\//)\n\t\t\t? pkg.module\n\t\t\t: pkg['jsnext:main'] || 'x.mjs',\n\t\tmainNoExtension,\n\t);\n\tlet modernMain = replaceName(\n\t\t(pkg.syntax && pkg.syntax.esmodules) || pkg.esmodule || 'x.modern.mjs',\n\t\tmainNoExtension,\n\t);\n\tlet cjsMain = replaceName(pkg['cjs:main'] || 'x.js', mainNoExtension);\n\tlet umdMain = replaceName(pkg['umd:main'] || 'x.umd.js', mainNoExtension);\n\n\tconst modern = format === 'modern';\n\n\t// let rollupName = safeVariableName(basename(entry).replace(/\\.js$/, ''));\n\n\tlet nameCache = {};\n\tconst bareNameCache = nameCache;\n\t// Support \"minify\" field and legacy \"mangle\" field via package.json:\n\tconst rawMinifyValue = options.pkg.minify || options.pkg.mangle || {};\n\tlet minifyOptions = typeof rawMinifyValue === 'string' ? {} : rawMinifyValue;\n\tconst getNameCachePath =\n\t\ttypeof rawMinifyValue === 'string'\n\t\t\t? () => resolve(options.cwd, rawMinifyValue)\n\t\t\t: () => resolve(options.cwd, 'mangle.json');\n\n\tconst useTypescript = extname(entry) === '.ts' || extname(entry) === '.tsx';\n\n\tconst externalPredicate = new RegExp(`^(${external.join('|')})($|/)`);\n\tconst externalTest =\n\t\texternal.length === 0 ? () => false : id => externalPredicate.test(id);\n\n\tfunction loadNameCache() {\n\t\ttry {\n\t\t\tnameCache = JSON.parse(fs.readFileSync(getNameCachePath(), 'utf8'));\n\t\t\t// mangle.json can contain a \"minify\" field, same format as the pkg.mangle:\n\t\t\tif (nameCache.minify) {\n\t\t\t\tminifyOptions = Object.assign(\n\t\t\t\t\t{},\n\t\t\t\t\tminifyOptions || {},\n\t\t\t\t\tnameCache.minify,\n\t\t\t\t);\n\t\t\t}\n\t\t} catch (e) {}\n\t}\n\tloadNameCache();\n\n\tnormalizeMinifyOptions(minifyOptions);\n\n\tif (nameCache === bareNameCache) nameCache = null;\n\n\tlet config = {\n\t\tinputOptions: {\n\t\t\tinput: entry,\n\t\t\texternal: id => {\n\t\t\t\tif (id === 'babel-plugin-transform-async-to-promises/helpers') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (options.multipleEntries && id === '.') {\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn externalTest(id);\n\t\t\t},\n\t\t\ttreeshake: {\n\t\t\t\tpropertyReadSideEffects: false,\n\t\t\t},\n\t\t\tplugins: []\n\t\t\t\t.concat(\n\t\t\t\t\tpostcss({\n\t\t\t\t\t\tplugins: [\n\t\t\t\t\t\t\tautoprefixer(),\n\t\t\t\t\t\t\toptions.compress !== false &&\n\t\t\t\t\t\t\t\tcssnano({\n\t\t\t\t\t\t\t\t\tpreset: 'default',\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t].filter(Boolean),\n\t\t\t\t\t\t// only write out CSS for the first bundle (avoids pointless extra files):\n\t\t\t\t\t\tinject: !!options.injectStyles,\n\t\t\t\t\t\textract: !options.injectStyles && !!writeMeta,\n\t\t\t\t\t}),\n\t\t\t\t\tObject.keys(moduleAliases).length > 0 &&\n\t\t\t\t\t\talias(\n\t\t\t\t\t\t\tObject.assign({}, moduleAliases, {\n\t\t\t\t\t\t\t\tresolve: EXTENSIONS,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t),\n\t\t\t\t\tnodeResolve({\n\t\t\t\t\t\tmainFields: ['module', 'jsnext', 'main'],\n\t\t\t\t\t\tbrowser: options.target !== 'node',\n\t\t\t\t\t}),\n\t\t\t\t\tcommonjs({\n\t\t\t\t\t\t// use a regex to make sure to include eventual hoisted packages\n\t\t\t\t\t\tinclude: /\\/node_modules\\//,\n\t\t\t\t\t}),\n\t\t\t\t\tjson(),\n\t\t\t\t\t{\n\t\t\t\t\t\t// We have to remove shebang so it doesn't end up in the middle of the code somewhere\n\t\t\t\t\t\ttransform: code => ({\n\t\t\t\t\t\t\tcode: code.replace(/^#![^\\n]*/, bang => {\n\t\t\t\t\t\t\t\tshebang[options.name] = bang;\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\tmap: null,\n\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t\tuseTypescript &&\n\t\t\t\t\t\ttypescript({\n\t\t\t\t\t\t\ttypescript: require('typescript'),\n\t\t\t\t\t\t\tcacheRoot: `./node_modules/.cache/.rts2_cache_${format}`,\n\t\t\t\t\t\t\ttsconfigDefaults: {\n\t\t\t\t\t\t\t\tcompilerOptions: {\n\t\t\t\t\t\t\t\t\tsourceMap: options.sourcemap,\n\t\t\t\t\t\t\t\t\tdeclaration: true,\n\t\t\t\t\t\t\t\t\tjsx: 'react',\n\t\t\t\t\t\t\t\t\tjsxFactory: options.jsx || 'React.createElement',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\ttsconfigOverride: {\n\t\t\t\t\t\t\t\tcompilerOptions: {\n\t\t\t\t\t\t\t\t\ttarget: 'esnext',\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t}),\n\t\t\t\t\t// if defines is not set, we shouldn't run babel through node_modules\n\t\t\t\t\tisTruthy(defines) &&\n\t\t\t\t\t\tbabel({\n\t\t\t\t\t\t\tbabelrc: false,\n\t\t\t\t\t\t\tconfigFile: false,\n\t\t\t\t\t\t\tcompact: false,\n\t\t\t\t\t\t\tinclude: 'node_modules/**',\n\t\t\t\t\t\t\tplugins: [\n\t\t\t\t\t\t\t\t[\n\t\t\t\t\t\t\t\t\trequire.resolve('babel-plugin-transform-replace-expressions'),\n\t\t\t\t\t\t\t\t\t{ replace: defines },\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\tcustomBabel({\n\t\t\t\t\t\textensions: EXTENSIONS,\n\t\t\t\t\t\texclude: 'node_modules/**',\n\t\t\t\t\t\tpassPerPreset: true, // @see https://babeljs.io/docs/en/options#passperpreset\n\t\t\t\t\t\tcustom: {\n\t\t\t\t\t\t\tdefines,\n\t\t\t\t\t\t\tmodern,\n\t\t\t\t\t\t\tcompress: options.compress !== false,\n\t\t\t\t\t\t\ttargets: options.target === 'node' ? { node: '8' } : undefined,\n\t\t\t\t\t\t\tpragma: options.jsx || 'React.createElement',\n\t\t\t\t\t\t\tpragmaFrag: options.jsxFragment || 'Fragment',\n\t\t\t\t\t\t\ttypescript: !!useTypescript,\n\t\t\t\t\t\t},\n\t\t\t\t\t}),\n\t\t\t\t\toptions.compress !== false && [\n\t\t\t\t\t\tterser({\n\t\t\t\t\t\t\tsourcemap: true,\n\t\t\t\t\t\t\tcompress: Object.assign(\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tkeep_infinity: true,\n\t\t\t\t\t\t\t\t\tpure_getters: true,\n\t\t\t\t\t\t\t\t\t// Ideally we'd just get Terser to respect existing Arrow functions...\n\t\t\t\t\t\t\t\t\t// unsafe_arrows: true,\n\t\t\t\t\t\t\t\t\tpasses: 10,\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tminifyOptions.compress || {},\n\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\twarnings: true,\n\t\t\t\t\t\t\tecma: modern ? 9 : 5,\n\t\t\t\t\t\t\ttoplevel: modern || format === 'cjs' || format === 'es',\n\t\t\t\t\t\t\tmangle: Object.assign({}, minifyOptions.mangle || {}),\n\t\t\t\t\t\t\tnameCache,\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tnameCache && {\n\t\t\t\t\t\t\t// before hook\n\t\t\t\t\t\t\toptions: loadNameCache,\n\t\t\t\t\t\t\t// after hook\n\t\t\t\t\t\t\twriteBundle() {\n\t\t\t\t\t\t\t\tif (writeMeta && nameCache) {\n\t\t\t\t\t\t\t\t\tfs.writeFile(\n\t\t\t\t\t\t\t\t\t\tgetNameCachePath(),\n\t\t\t\t\t\t\t\t\t\tJSON.stringify(nameCache, null, 2),\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t],\n\t\t\t\t\t{\n\t\t\t\t\t\twriteBundle(bundle) {\n\t\t\t\t\t\t\tconfig._sizeInfo = Promise.all(\n\t\t\t\t\t\t\t\tObject.values(bundle).map(({ code, fileName }) =>\n\t\t\t\t\t\t\t\t\tcode ? getSizeInfo(code, fileName, options.raw) : false,\n\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t).then(results => results.filter(Boolean).join('\\n'));\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.filter(Boolean),\n\t\t},\n\n\t\toutputOptions: {\n\t\t\tpaths: outputAliases,\n\t\t\tglobals,\n\t\t\tstrict: options.strict === true,\n\t\t\tlegacy: true,\n\t\t\tfreeze: false,\n\t\t\tesModule: false,\n\t\t\tsourcemap: options.sourcemap,\n\t\t\tget banner() {\n\t\t\t\treturn shebang[options.name];\n\t\t\t},\n\t\t\tformat: modern ? 'es' : format,\n\t\t\tname: options.name,\n\t\t\tfile: resolve(\n\t\t\t\toptions.cwd,\n\t\t\t\t{\n\t\t\t\t\tmodern: modernMain,\n\t\t\t\t\tes: moduleMain,\n\t\t\t\t\tumd: umdMain,\n\t\t\t\t}[format] || cjsMain,\n\t\t\t),\n\t\t},\n\t};\n\n\treturn config;\n}\n"],"names":["readFile","promisify","fs","stat","isDir","name","then","stats","isDirectory","catch","isFile","stdout","console","log","bind","stderr","error","isTruthy","obj","constructor","Object","keys","length","ESMODULES_TARGET","esmodules","mergeConfigItems","type","configItemsToMerge","mergedItems","forEach","configItemToMerge","item","itemToMergeWithIndex","findIndex","mergedItem","file","resolved","push","createConfigItem","merge","options","createConfigItems","items","map","require","resolve","babelPlugin","custom","babelCore","customOptions","pluginOptions","config","defaultPlugins","pragma","jsx","pragmaFrag","jsxFragment","typescript","defines","replace","modern","inlineHelpers","externalHelpers","loose","async","filter","Boolean","babelOptions","envIdx","presets","preset","request","includes","assign","useBuiltIns","targets","modules","exclude","plugins","generatorOpts","minified","compress","compact","shouldPrintComment","comment","test","err","description","message","plugin","red","bold","loc","line","column","frame","dim","stack","headlessStack","getEntries","input","cwd","concat","entries","i","arr","indexOf","getOutput","output","pkgMain","pkgName","main","removeScope","match","getInput","source","module","glob","jsOrTs","Array","isArray","filename","extension","getConfigFromPkgJson","pkgJSON","pkg","JSON","parse","hasPackageJson","basename","yellow","inverse","msg","String","microbundle","inputOptions","process","finalName","getName","amdName","sourcemap","multipleEntries","formats","format","split","sort","a","b","steps","j","createConfig","watch","onBuild","Promise","reject","blue","relative","dirname","outputOptions","WATCH_OPTS","on","e","code","logError","_sizeInfo","text","trim","cache","series","rollup","bundle","write","out","join","getSizeInfo","raw","gzipSize","gzip","formatSize","brotliSize","brotli","toReplacementExpression","value","matches","stringify","normalizeMinifyOptions","minifyOptions","mangle","properties","regex","reserved","RegExp","parseMappingArgument","globalStrings","processValue","globals","globalString","key","r","undefined","EXTENSIONS","size","pretty","prettyBytes","color","green","MAGIC_INDENTATION","repeat","white","safeVariableName","camelCase","toLowerCase","shebang","entry","writeMeta","external","outputAliases","moduleAliases","alias","peerDeps","peerDependencies","dependencies","reduce","define","replaceName","mainNoExtension","moduleMain","modernMain","syntax","esmodule","cjsMain","umdMain","nameCache","bareNameCache","rawMinifyValue","minify","getNameCachePath","useTypescript","extname","externalPredicate","externalTest","id","loadNameCache","readFileSync","treeshake","propertyReadSideEffects","postcss","autoprefixer","cssnano","inject","injectStyles","extract","nodeResolve","mainFields","browser","target","commonjs","include","json","transform","bang","cacheRoot","tsconfigDefaults","compilerOptions","sourceMap","declaration","jsxFactory","tsconfigOverride","babel","babelrc","configFile","customBabel","extensions","passPerPreset","node","terser","keep_infinity","pure_getters","passes","warnings","ecma","toplevel","writeBundle","writeFile","all","values","fileName","results","paths","strict","legacy","freeze","esModule","banner","es","umd"],"mappings":"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"}